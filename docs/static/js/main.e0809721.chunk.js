(this["webpackJsonptwitch-app"]=this["webpackJsonptwitch-app"]||[]).push([[0],{63:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),s=(n(63),n(6)),u=n.n(s),o=n(10),l=n(30),p=(n(65),n(21)),h=n(42),d=n(36),b="https://s780609.github.io/twitch-app",f=(new URL(b).port&&new URL(b).port,"/"==new URL(b).pathname||new URL(b).pathname,{clientId:"vr0gbze3cw6zvxavzvjjxokdydm7cj",clientSecret:"b1ew7n5ziqoxx1v5186x75nsvgbok0",accessToken:"",redirect_uri:b,parentDomain:new URL(b).hostname}),x=Object(h.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"accessToken":return Object(d.a)(Object(d.a)({},e),{},{accessToken:t.accessToken});default:return Object(d.a)({},e)}})),j=n(27),v=n.n(j);function w(){return(w=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!=t.length){e.next=2;break}return e.abrupt("return");case 2:return n=t.split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{}),e.abrupt("return",n.access_token);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(e){return w.apply(this,arguments)};function m(){return(m=Object(o.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id_token:{email_verified:null}},r="https://id.twitch.tv/oauth2/authorize?response_type=token+id_token&client_id=".concat(t,"&redirect_uri=").concat(n,"&&scope=viewing_activity_read+openid&claims=").concat(a),e.next=4,window.location.replace(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e,t){return m.apply(this,arguments)},g=n(98),y=n(5);var _=function(e){var t=e.height,n=e.width,a=e.allowfullscreen,r=void 0===a||a,c=e.autoplay,i=e.videoId,s=e.title,u=(e.description,e.parent);return void 0==n&&(n="400px"),Object(y.jsx)(g.a,{border:"light",style:{maxWidth:n,width:n,display:"BLOCK",margin:"auto"},children:Object(y.jsxs)(g.a.Body,{children:[Object(y.jsx)("iframe",{title:s,src:"https://player.twitch.tv/?autoplay=".concat(null!=c,"&parent=").concat(u,"&video=").concat(i),height:null==t?300:t,width:null==n?400:n,allowFullScreen:null==r||r}),Object(y.jsx)("p",{style:{maxWidth:n,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:s})]})})};var z=function(e){var t=e.twitchGameData,n=e.parentDomain;return null==t||0==t.length?Object(y.jsx)(y.Fragment,{}):Object(y.jsx)(y.Fragment,{children:t.map((function(e){return Object(y.jsx)(_,{videoId:e.id,title:e.title,description:e.description,parent:n},e.id)}))})},C=n(93),I=n(97),S=n(43);var B=function(e){var t=e.gameName,n=Object(p.b)(),r=Object(a.useState)([]),c=Object(l.a)(r,2),i=c[0],s=c[1],h=Object(p.c)((function(e){return e.accessToken})),d=Object(p.c)((function(e){return e.clientId})),b=Object(p.c)((function(e){return e.redirect_uri})),f=Object(p.c)((function(e){return e.parentDomain}));function x(){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=document.location.hash.substr(1))){e.next=6;break}return e.next=4,k(d,b);case 4:e.next=10;break;case 6:return e.next=8,O(t);case 8:a=e.sent,n({type:"accessToken",accessToken:a});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)(Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===h){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,x();case 4:case"end":return e.stop()}}),e)}))),[]),Object(a.useEffect)(Object(o.a)(u.a.mark((function e(){var n,a,r,c,i,o,l,p,d,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=h){e.next=2;break}return e.abrupt("return");case 2:if(S.a.show("#255AC4",1.5,"Loading..."),""!=t){e.next=27;break}return e.next=6,_();case 6:n=e.sent,console.log(n),a=0;case 9:if(!(a<n.length)){e.next=21;break}return r=n[a].id,console.log(r),e.next=14,m(r);case 14:if(null==(c=e.sent)||0==c.length){e.next=18;break}return s(c),e.abrupt("return");case 18:a++,e.next=9;break;case 21:return e.next=23,g();case 23:i=e.sent,s(i),e.next=50;break;case 27:return e.next=29,w();case 29:if(void 0==(o=e.sent)||0==o.length){e.next=46;break}l=0;case 32:if(!(l<o.length)){e.next=44;break}return p=o[l].id,console.log(p),e.next=37,m(p);case 37:if(null==(d=e.sent)||0==d.length){e.next=41;break}return s(d),e.abrupt("return");case 41:l++,e.next=32;break;case 44:e.next=50;break;case 46:return e.next=48,g();case 48:b=e.sent,s(b);case 50:S.a.close();case 51:case"end":return e.stop()}}),e)}))),[h,t]);var w=function(){var e=Object(o.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.twitch.tv/helix/games?name=".concat(t),e.next=3,v.a.get(n,{headers:{Authorization:"Bearer ".concat(h),"Client-Id":"".concat(d)}});case 3:if(200!=(a=e.sent).status||null==a.data||0==a.data.data.length){e.next=6;break}return e.abrupt("return",a.data.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.a.get("https://api.twitch.tv/helix/videos?game_id=".concat(t,"&first=20"),{headers:{Authorization:"Bearer ".concat(h),"Client-Id":"".concat(d)}});case 4:return n=e.sent,e.abrupt("return",n.data.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://api.twitch.tv/helix/videos?id=335921245",{headers:{Authorization:"Bearer ".concat(h),"Client-Id":"".concat(d)}});case 3:return t=e.sent,e.abrupt("return",t.data.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://api.twitch.tv/helix/games/top",{headers:{Authorization:"Bearer ".concat(h),"Client-Id":"".concat(d)}});case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(C.a,{fluid:!0,style:{display:"flex",flexWrap:"wrap"},children:[null==i||0==i.length?Object(y.jsx)(I.a,{show:!0,variant:"info",children:"\u6c92\u6709\u5f71\u7247"}):Object(y.jsx)(y.Fragment,{}),Object(y.jsx)(z,{twitchGameData:i,parentDomain:f})]})},T=n(57),L=n(7),D=n(46),N=n(96),A=n(95),F=n(58),R=n(94);var U=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],h=i[1],d=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r("");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(p.a,{store:x,children:Object(y.jsxs)(T.a,{children:[Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(D.a,{expand:"lg",bg:"dark",variant:"dark",children:Object(y.jsxs)(N.a,{className:"container-fluid",children:[Object(y.jsx)(D.a.Brand,{children:"twitch-app"}),Object(y.jsxs)(A.a,{inline:!0,className:"ml-auto",children:[Object(y.jsx)(F.a,{type:"input",placeholder:"Search Game Name",className:"mr-sm-2",onChange:function(e){h(e.target.value)}}),Object(y.jsx)(R.a,{variant:"outline-success",onClick:function(e){r(s)},children:"Search"}),Object(y.jsx)(R.a,{variant:"outline-success",onClick:d,children:"Top Games"})]})]})})}),Object(y.jsx)(L.b,{children:Object(y.jsx)(B,{gameName:n})})]})})};i.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(U,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.e0809721.chunk.js.map