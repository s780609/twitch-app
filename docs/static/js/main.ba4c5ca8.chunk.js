(this["webpackJsonptwitch-app"]=this["webpackJsonptwitch-app"]||[]).push([[0],{62:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(15),s=n.n(r),i=(n(62),n(23)),o=(n(63),n(22)),u=n(42),l=n(36),d="http://localhost:3000",p=(new URL(d).port&&new URL(d).port,"/"==new URL(d).pathname?"":new URL(d).pathname),h={clientId:"vr0gbze3cw6zvxavzvjjxokdydm7cj",clientSecret:"3x2oiag46esvkqhp99ah13q1cr3wyk",accessToken:"",redirect_uri:d,parentDomain:new URL(d).hostname+p},j=Object(u.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.accessToken){case"accessToken":return Object(l.a)(Object(l.a)({},e),{},{token:t.accessToken});default:return Object(l.a)({},e)}})),b=n(10),f=n.n(b),O=n(17),x=n(28),v=n.n(x);function m(){return(m=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!=t.length){e.next=2;break}return e.abrupt("return");case 2:return n=t.split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{}),e.abrupt("return",n.access_token);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){return m.apply(this,arguments)};function g(){return(g=Object(O.a)(f.a.mark((function e(t,n){var a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id_token:{email_verified:null}},c="https://id.twitch.tv/oauth2/authorize?response_type=token+id_token&client_id=".concat(t,"&redirect_uri=").concat(n,"&&scope=viewing_activity_read+openid&claims=").concat(a),e.next=4,window.location.replace(c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e,t){return g.apply(this,arguments)},y=n(98),_=n(5);var S=function(e){var t=e.height,n=e.width,a=e.allowfullscreen,c=e.autoplay,r=e.videoId,s=e.title,i=(e.description,e.parent);return Object(_.jsxs)(y.a,{border:"light",style:{width:"400px"},children:[Object(_.jsx)("iframe",{src:"https://player.twitch.tv/?autoplay=".concat(null!=c,"&parent=").concat(i,"&video=").concat(r),height:null==t?300:t,width:null==n?400:n,allowfullscreen:null==a?"allowFullScreen":a}),Object(_.jsx)(y.a.Header,{children:s}),Object(_.jsx)(y.a.Body,{})]})},D=n(92);var I=function(e){var t=e.twitchGameData,n=e.parentDomain;return null==t||0==t.length?(console.log("twitchGameData is empty"),Object(_.jsx)(_.Fragment,{})):(console.log(n),Object(_.jsx)(D.a,{children:t.map((function(e){return Object(_.jsx)(S,{videoId:e.id,title:e.title,description:e.description,parent:n},e.id)}))}))},z=n(93),N=n(97);var T=function(e){var t=e.gameName;console.log("render");var n=Object(o.b)(),c=Object(a.useState)(""),r=Object(i.a)(c,2),s=r[0],u=r[1],l=Object(a.useState)([]),d=Object(i.a)(l,2),p=d[0],h=d[1],j=Object(a.useState)(""),b=Object(i.a)(j,2),x=b[0],m=b[1],g=Object(o.c)((function(e){return e.clientId})),y=Object(o.c)((function(e){return e.redirect_uri})),S=Object(o.c)((function(e){return e.parentDomain}));function D(){return T.apply(this,arguments)}function T(){return(T=Object(O.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=document.location.hash.substr(1))){e.next=6;break}return e.next=4,k(g,y);case 4:e.next=11;break;case 6:return e.next=8,w(t);case 8:a=e.sent,n({type:"accessToken",accessToken:a}),u(a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)(Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:case"end":return e.stop()}}),e)}))),[]),Object(a.useEffect)(Object(O.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=s){e.next=3;break}return console.log("access token is empty"),e.abrupt("return");case 3:return e.next=5,v.a.get("https://api.twitch.tv/helix/games?name=".concat(t),{headers:{Authorization:"Bearer ".concat(s),"Client-Id":"".concat(g)}});case 5:200==(n=e.sent).status&&null!=n.data&&0!=n.data.data.length?(m(n.data.data[0].id),console.log(n.data.data[0].id)):(console.log("response's data is empty"),console.log(n));case 7:case"end":return e.stop()}}),e)}))),[s,t]),Object(a.useEffect)(Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.a.get("https://api.twitch.tv/helix/videos?game_id=".concat(x,"&first=20"),{headers:{Authorization:"Bearer ".concat(s),"Client-Id":"".concat(g)}});case 4:t=e.sent,h(t.data.data);case 6:case"end":return e.stop()}}),e)}))),[x]),Object(_.jsxs)(z.a,{children:[null==p||0==p.length?Object(_.jsx)(N.a,{show:!0,variant:"info",children:"\u67e5\u7121\u8cc7\u6599"}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)(I,{twitchGameData:p,parentDomain:S})]})},B=n(56),L=n(6),R=n(45),U=n(96),C=n(95),E=n(57),F=n(94);var G=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),u=s[0],l=s[1];function d(e){c(u)}return Object(_.jsx)(o.a,{store:j,children:Object(_.jsxs)(B.a,{children:[Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(R.a,{expand:"lg",bg:"dark",variant:"dark",children:Object(_.jsxs)(U.a,{className:"container-fluid",children:[Object(_.jsx)(R.a.Brand,{children:"\u7165\u7165\u7684\u9078\u64c7"}),Object(_.jsxs)(C.a,{inline:!0,className:"ml-auto",children:[Object(_.jsx)(E.a,{type:"input",placeholder:"Search Game Name",className:"mr-sm-2",onChange:function(e){l(e.target.value),c("")},onKeyPress:d}),Object(_.jsx)(F.a,{variant:"outline-success",onClick:d,children:"Search"})]})]})})}),Object(_.jsx)(L.b,{children:Object(_.jsx)(T,{gameName:n})})]})})};s.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(G,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.ba4c5ca8.chunk.js.map