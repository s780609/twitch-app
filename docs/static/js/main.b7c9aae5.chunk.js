(this["webpackJsonptwitch-app"]=this["webpackJsonptwitch-app"]||[]).push([[0],{62:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),i=n.n(c),s=(n(62),n(29)),o=(n(63),n(21)),u=n(42),l=n(36),p="https://s780609.github.io/twitch-app",d=(new URL(p).port&&new URL(p).port,"/"==new URL(p).pathname?"":new URL(p).pathname),h={clientId:"vr0gbze3cw6zvxavzvjjxokdydm7cj",clientSecret:"b1ew7n5ziqoxx1v5186x75nsvgbok0",accessToken:"",redirect_uri:p,parentDomain:new URL(p).hostname+d},j=Object(u.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"accessToken":return Object(l.a)(Object(l.a)({},e),{},{accessToken:t.accessToken});default:return Object(l.a)({},e)}})),b=n(10),f=n.n(b),x=n(17),v=n(32),O=n.n(v);function m(){return(m=Object(x.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!=t.length){e.next=2;break}return e.abrupt("return");case 2:return n=t.split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{}),e.abrupt("return",n.access_token);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){return m.apply(this,arguments)};function k(){return(k=Object(x.a)(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id_token:{email_verified:null}},r="https://id.twitch.tv/oauth2/authorize?response_type=token+id_token&client_id=".concat(t,"&redirect_uri=").concat(n,"&&scope=viewing_activity_read+openid&claims=").concat(a),e.next=4,window.location.replace(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e,t){return k.apply(this,arguments)},y=n(98),_=n(5);var z=function(e){var t=e.height,n=e.width,a=e.allowfullscreen,r=void 0===a||a,c=e.autoplay,i=e.videoId,s=e.title,o=(e.description,e.parent);return Object(_.jsxs)(y.a,{border:"light",style:{width:"400px"},children:[Object(_.jsx)("iframe",{src:"https://player.twitch.tv/?autoplay=".concat(null!=c,"&parent=").concat(o,"&video=").concat(i),height:null==t?300:t,width:null==n?400:n,allowfullscreen:null==r||r}),Object(_.jsx)(y.a.Header,{children:s}),Object(_.jsx)(y.a.Body,{})]})},I=n(92);var S=function(e){var t=e.twitchGameData,n=e.parentDomain;return null==t||0==t.length?Object(_.jsx)(_.Fragment,{}):Object(_.jsx)(I.a,{children:t.map((function(e){return Object(_.jsx)(z,{videoId:e.id,title:e.title,description:e.description,parent:n},e.id)}))})},T=n(93),D=n(97);var N=function(e){var t=e.gameName,n=Object(o.b)(),r=Object(a.useState)([]),c=Object(s.a)(r,2),i=c[0],u=c[1],l=Object(o.c)((function(e){return e.accessToken})),p=Object(o.c)((function(e){return e.clientId})),d=Object(o.c)((function(e){return e.redirect_uri})),h=Object(o.c)((function(e){return e.parentDomain}));function j(){return b.apply(this,arguments)}function b(){return(b=Object(x.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=(t=document.location.hash.substr(1))){e.next=6;break}return e.next=4,g(p,d);case 4:e.next=10;break;case 6:return e.next=8,w(t);case 8:a=e.sent,n({type:"accessToken",accessToken:a});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)(Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,j();case 4:case"end":return e.stop()}}),e)}))),[]),Object(a.useEffect)(Object(x.a)(f.a.mark((function e(){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O.a.get("https://api.twitch.tv/helix/games?name=".concat(t),{headers:{Authorization:"Bearer ".concat(l),"Client-Id":"".concat(p)}});case 4:if(200!=(n=e.sent).status||null==n.data||0==n.data.data.length){e.next=12;break}return e.next=8,v(n.data.data[0].id);case 8:a=e.sent,u(a),e.next=13;break;case 12:console.log("response's data is empty, search by => ".concat(t));case 13:case"end":return e.stop()}}),e)}))),[l,t]);var v=function(){var e=Object(x.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O.a.get("https://api.twitch.tv/helix/videos?game_id=".concat(t,"&first=20"),{headers:{Authorization:"Bearer ".concat(l),"Client-Id":"".concat(p)}});case 4:return n=e.sent,e.abrupt("return",n.data.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(T.a,{children:[null==i||0==i.length?Object(_.jsx)(D.a,{show:!0,variant:"info",children:"\u67e5\u7121\u8cc7\u6599"}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)(S,{twitchGameData:i,parentDomain:h})]})},B=n(56),L=n(6),R=n(45),U=n(96),C=n(95),E=n(57),F=n(94);var G=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(s.a)(c,2),u=i[0],l=i[1];return Object(_.jsx)(o.a,{store:j,children:Object(_.jsxs)(B.a,{children:[Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(R.a,{expand:"lg",bg:"dark",variant:"dark",children:Object(_.jsxs)(U.a,{className:"container-fluid",children:[Object(_.jsx)(R.a.Brand,{children:"twitch-app"}),Object(_.jsxs)(C.a,{inline:!0,className:"ml-auto",children:[Object(_.jsx)(E.a,{type:"input",placeholder:"Search Game Name",className:"mr-sm-2",onChange:function(e){l(e.target.value)}}),Object(_.jsx)(F.a,{variant:"outline-success",onClick:function(e){r(u)},children:"Search"})]})]})})}),Object(_.jsx)(L.b,{children:Object(_.jsx)(N,{gameName:n})})]})})};i.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(G,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.b7c9aae5.chunk.js.map